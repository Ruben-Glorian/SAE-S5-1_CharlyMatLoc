<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Catalogue des outils</title>
    <style>
        body { font-family: Arial, sans-serif; margin:20px; color:#333; }
        .catalogue { display:grid; grid-template-columns: repeat(auto-fill, minmax(220px,1fr)); gap:16px; }
        .card { border:1px solid #e0e0e0; border-radius:8px; padding:12px; background:#fff; box-shadow:0 1px 2px rgba(0,0,0,.04); text-align:center; }
        .card img { width:100%; height:140px; object-fit:cover; border-radius:4px; margin-bottom:8px; }
        .name { font-weight:600; margin-bottom:6px; }
        .meta { color:#666; font-size:0.9em; }
        .empty { color:#888; }

        /* bouton de connexion/inscription en haut Ã  droite */
        .top-actions { position:fixed; top:18px; right:20px; z-index:1000; display:flex; gap:8px; }
        .top-actions a, .top-actions button { display:inline-block; padding:8px 12px; border-radius:6px; text-decoration:none; color:#fff; background:#2b6cb0; border:0; cursor:pointer; font-weight:600; }
        .top-actions a.secondary { background:#4a5568; }
        .top-actions form { margin:0; }
    </style>
</head>
<body>
    <div class="top-actions">
        <a href="/signin" title="Se connecter">Se connecter</a>
        <form method="get" action="/panier/api">
            <button type="submit" title="Voir le panier">ðŸ›’ Mon panier</button>
        </form>
    </div>

    <h1>Catalogue des outils</h1>

    {% if catalogue is empty %}
        <p class="empty">Aucun outil disponible.</p>
    {% else %}
        <div class="catalogue">
            {% for outil in catalogue %}
                <div class="card">
                    <a href="/outils/{{ outil.id }}" style="text-decoration:none;color:inherit;" title="AccÃ©der au dÃ©tail">
                        <img src="{{ outil.image_url }}" alt="{{ outil.nom }}">
                    </a>
                    <div class="meta">1 exemplaire disponible</div>
                    <form method="post" action="/api/panier/ajouter">
                        <input type="hidden" name="outil_id" value="{{ outil.id }}">
                        <label for="date-{{ outil.id }}">Date :</label>
                        <input type="date" id="date-{{ outil.id }}" name="date" required min="{{ "now"|date('Y-m-d') }}">
                        <button type="submit">Ajouter au panier</button>
                    </form>
                </div>
            {% endfor %}
        </div>
    {% endif %}
</body>
</html>
