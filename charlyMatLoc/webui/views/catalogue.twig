<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Catalogue des outils</title>
    <style>
        body { font-family: Arial, sans-serif; margin:20px; color:#333; }
        .catalogue { display:grid; grid-template-columns: repeat(auto-fill, minmax(220px,1fr)); gap:16px; }
        .card { border:1px solid #e0e0e0; border-radius:8px; padding:12px; background:#fff; box-shadow:0 1px 2px rgba(0,0,0,.04); text-align:center; }
        .card img { width:100%; height:140px; object-fit:cover; border-radius:4px; margin-bottom:8px; }
        .name { font-weight:600; margin-bottom:6px; }
        .meta { color:#666; font-size:0.9em; }
        .empty { color:#888; }
    </style>
</head>
<body>
    <div style="position:fixed;top:24px;right:32px;z-index:1000;">
        <form method="get" action="/panier/api">
            <button type="submit" style="background:none;border:none;cursor:pointer;">
                <span title="Voir le panier" style="font-size:2em;">
                    ðŸ›’ Mon panier
                </span>
            </button>
        </form>
    </div>

    <h1>Catalogue des outils</h1>

    {% if catalogue is empty %}
        <p class="empty">Aucun outil disponible.</p>
    {% else %}
        <div class="catalogue">
            {% for outil in catalogue %}
                <div class="card">
                    <a href="/outils/{{ outil.id }}" style="text-decoration:none;color:inherit;" title="AccÃ©der au dÃ©tail">
                        <img src="{{ outil.image_url }}" alt="{{ outil.nom }}">
                    </a>
                    <div class="meta">1 exemplaire disponible</div>
                    <form method="post" action="/api/panier/ajouter">
                        <input type="hidden" name="outil_id" value="{{ outil.id }}">
                        <label for="date-{{ outil.id }}">Date :</label>
                        <input type="date" id="date-{{ outil.id }}" name="date" required min="{{ "now"|date('Y-m-d') }}">
                        <button type="submit">Ajouter au panier</button>
                    </form>
                </div>
            {% endfor %}
        </div>
    {% endif %}
</body>
</html>
